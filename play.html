<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Coloreto</title>
<link rel="stylesheet" href="bootstrap-4.0.0-alpha.6-dist/css/bootstrap.css"/>
<style>
	.container-fluid{
		background-image:url(wallpaper.png);
		height:800px;
	}
	.text-primary{
		color: black!important;
		font-size: 20px;
	}
	.welcome{
		padding-top:20px;
	}
	.play_zone{
		height: 120px;
		border: 1px black solid;
		background-color: white;
		margin: 3px;
	}
	.common_cards_zone{
		height: auto;
		border: 1px black solid;
		background-image: url(coloretto-zone.jpg);
/*		-webkit-filter: blur(1px);
		-moz-filter: blur(1px);
		-o-filter: blur(1px);
		-ms-filter: blur(1px);
		filter: blur(1px);
*/	}
	.player{
		background-image:url(wallpaper.png);
		-webkit-filter: blur(5px);
		-moz-filter: blur(5px);
		-o-filter: blur(5px);
		-ms-filter: blur(5px);
		filter: blur(5px);
	}
	.image_row{
		margin: 4px 3px 10px 3px;
		box-shadow: 1px 1px black;
	}
	#deck_zone{

		padding: 9px;
	}

</style>
</head>

<body>
<script src="jquery-3.2.1.min.js"></script>
<script src="jquery-ui-1.12.1/jquery-ui.js"></script>
<div class="container-fluid" id="main_page">

</div>

<script>
var num_players = window.sessionStorage.getItem("num_players");
var rows= [];
var players =[];
var preselected = ["bambu","clouds","fruits","orange","sunflower","violet","wood"]
var elected = []
for(var j=0; j< num_players;j++){
	players.push({
		as: 0,
		bambu:0,
		clouds:0,
		fruits:0,
		orange:0,
		sunflower:0,
		violet:0,
		wood:0,
		number2:0
	})
	var n= Math.floor(Math.random()*preselected.length);
	players[j][preselected[n]] +=1
	elected.push(preselected[n])
	preselected.splice(n,1);
}

class Deck{
	addCard(name){
		this.cards.push(name);
	}
	drawCard(){
		this.cards.pop;
	}
	shuffle(){
		var l = this.cards.length;
		var unchosen = this.cards.slice();
		for(var i=0; i<l;i++){
			var n = Math.floor(Math.random()*unchosen.length);
			this.cards[i] = unchosen[n];
			unchosen.splice(n,1);
		}
	}
}

var colorettoDeck = new Deck();
colorettoDeck.cards=[];
var colores= ["b","c","f","o","s","v","w"]
if(num_players<=3){
	var n = Math.floor(Math.random()*colores.length);
	alert(n);
	colores.splice(n,1);
}

for (var c=0; c<colores.length;c++){

	for(var n=0; n<9;n++){
		colorettoDeck.addCard(colores[c])
	}
}
for (var n=0;n<10;n++){
	colorettoDeck.addCard("2");
}
for(var n=0;n<3;n++){
	colorettoDeck.addCard("a");
}

for(var i=0;i<5;i++){
	colorettoDeck.shuffle()
}

function init(){
	var num_players = parseInt(window.sessionStorage.getItem("num_players"))
	var mainPage = document.getElementById("main_page");
	var bigRow = document.createElement("div");
	$(bigRow).addClass("row");
	var playersZone = document.createElement("div");
	var commonCardsZone = document.createElement("div");
	$(playersZone).addClass("col-md-8 players_zone");
	$(commonCardsZone).addClass("col-md-4 common_cards_zone").css("height",123*num_players );
	mainPage.appendChild(bigRow);
	bigRow.appendChild(playersZone);
	bigRow.appendChild(commonCardsZone);		
	for(var i=0; i<num_players;i++ ){
		var row = document.createElement("div")
		$(row).addClass("row play_zone");
		playersZone.appendChild(row);
		var zona_juego = document.createElement("div")
		$(zona_juego).addClass("col-md-12 player");
		row.appendChild(zona_juego);	
		var rowImage = document.createElement("img");
		$(rowImage).attr("src","rows.png").attr("height","110px").addClass("img-responsive image_row");
		var row = document.createElement("div");
		$(row).addClass("row");
		commonCardsZone.appendChild(row);
		row.appendChild(rowImage)
		}
	var row = document.createElement("div");
	$(row).addClass("row");
	$(row).html("<div class='col-md-8'> </div> <div class='col-md-4' id='deck_zone'> </div> ");
	mainPage.appendChild(row);
	var deckImage = document.createElement('img');
	$(deckImage).attr("src","cardBackBig.jpg").attr("height","160px").addClass("img-responsive image_card_back");
	$('#deck_zone').append(deckImage);
	}

init()

</script>
</body>
</html>
